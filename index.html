<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Boulder True Crime – Official Story vs. Community Memory (15 Cases)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    * { box-sizing: border-box; }
    html, body {
      height: 100%; margin: 0; padding: 0;
      background: #020617;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    #map { position: absolute; inset: 0; }

    /* --- HEADER --- */
    .map-header {
      position: absolute;
      top: 16px; left: 16px;
      padding: 14px 18px;
      border-radius: 18px;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(14px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      z-index: 1000;
      max-width: min(520px, 92vw);
    }
    .map-header-title {
      font-size: 11px; letter-spacing: 0.16em; text-transform: uppercase;
      color: #9ca3af; margin-bottom: 2px;
    }
    .map-header-main {
      font-size: 18px; font-weight: 600; color: #f9fafb; margin-bottom: 4px;
    }
    .map-header-sub {
      font-size: 12px; color: #9ca3af; line-height: 1.4;
    }

    /* --- LEGEND --- */
    .map-legend {
      position: absolute;
      bottom: 16px; left: 16px;
      padding: 14px 16px;
      border-radius: 18px;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(14px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      z-index: 1000;
      font-size: 12px;
      color: #d1d5db;
      max-width: min(360px, 90vw);
    }
    .legend-title {
      font-size: 11px; text-transform: uppercase; letter-spacing: 0.16em;
      margin-bottom: 6px; color: #9ca3af;
    }
    .legend-row {
      display: flex; align-items: center; gap: 6px; margin-bottom: 5px;
    }
    .legend-dot {
      width: 12px; height: 12px; border-radius: 999px;
    }
    .legend-dot.high { background: #b91c1c; }
    .legend-dot.medium { background: #f97316; }
    .legend-dot.low { background: #6b7280; }
    .legend-note {
      margin-top: 6px; font-size: 11px; color: #6b7280;
    }

    /* --- POPUPS --- */
    .leaflet-popup-content-wrapper {
      background: transparent; border-radius: 20px; padding: 0; box-shadow: none;
    }
    .leaflet-popup-content { margin: 0; }
    .leaflet-popup-tip { background: #020617; }

    .case-popup {
      min-width: 270px; max-width: 360px;
      padding: 12px 14px;
      background: #020617;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 20px 50px rgba(0,0,0,0.85);
      color: #e5e7eb;
    }
    .case-meta {
      display: flex; justify-content: space-between; align-items: baseline;
      margin-bottom: 6px; font-size: 11px; text-transform: uppercase;
      letter-spacing: 0.16em; color: #9ca3af;
    }
    .case-title { font-size: 15px; margin: 0 0 4px; color: #f9fafb; }
    .case-summary { font-size: 12px; margin: 0 0 8px; line-height: 1.45; color: #e5e7eb; }

    /* HOVER LABELS */
    .hover-label {
      position: absolute;
      padding: 5px 9px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.4);
      border-radius: 8px;
      font-size: 11px;
      pointer-events: none;
      color: #f9fafb;
      white-space: nowrap;
      z-index: 2000;
      display: none;
    }

    @media (max-width: 640px) {
      .map-header, .map-legend {
        left: 50%; transform: translateX(-50%);
      }
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <div id="hover" class="hover-label"></div>

  <!-- Header -->
  <div class="map-header">
    <div class="map-header-title">Explorations in Anthropology · True Crime</div>
    <div class="map-header-main">Boulder County Homicides: Official Story vs. Community Memory</div>
    <div class="map-header-sub">
      Fifteen homicide cases from 1911–2021, mapped across Boulder County to compare where violence is documented, sensationalized, or allowed to fade from view.
    </div>
  </div>

  <!-- Legend -->
  <div class="map-legend">
    <div class="legend-title">Media Coverage Intensity</div>
    <div class="legend-row"><span class="legend-dot high"></span>High — national / sustained regional</div>
    <div class="legend-row"><span class="legend-dot medium"></span>Medium — revived via cold-case attention</div>
    <div class="legend-row"><span class="legend-dot low"></span>Low — archival only / brief mention</div>
    <div class="legend-note">Glow size increases with media attention.</div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
⬇ CONTINUED (SCRIPT SECTION)
html
Copy code
/*************
 BASEMAP
**************/
const map = L.map('map', {
  scrollWheelZoom: true,
  zoomControl: true
}).setView([40.05, -105.28], 11);

L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}.png', {
  maxZoom: 18,
  attribution: '&copy; Stadia Maps &copy; OpenMapTiles &copy; OpenStreetMap contributors'
}).addTo(map);


/*************
 MARKER VISUAL SCALING
**************/
function getMarkerStyle(coverage) {
  const c = coverage.toLowerCase();
  if (c.startsWith("high")) return { color: "#b91c1c", radius: 14, glow: 0.55 };
  if (c.startsWith("medium")) return { color: "#f97316", radius: 9, glow: 0.35 };
  return { color: "#6b7280", radius: 6, glow: 0.2 };
}


/*************
 ADD MARKERS
**************/
cases.forEach(c => {
  const style = getMarkerStyle(c.media_coverage);

  const marker = L.circleMarker([c.latitude, c.longitude], {
    radius: style.radius,
    color: style.color,
    weight: 1.4,
    fillColor: style.color,
    fillOpacity: 0.85 + style.glow * 0.1
  }).addTo(map);

  // POPUP
  const popupHtml = `
    <div class="case-popup">
      <div class="case-meta">
        <span class="case-year">${c.year}</span>
        <span class="case-location">${c.location}</span>
      </div>
      <h2 class="case-title">${c.case_name}</h2>
      <p class="case-summary">${c.summary}</p>
      <p><strong>Official:</strong> ${c.official_story}</p>
      <p><strong>Community:</strong> ${c.community_memory}</p>
    </div>
  `;
  marker.bindPopup(popupHtml);

  /*************
   HOVER LABEL
  **************/
  marker.on("mouseover", e => {
    const hover = document.getElementById("hover");
    hover.innerText = c.case_name;
    hover.style.display = "block";
  });

  marker.on("mousemove", e => {
    const hover = document.getElementById("hover");
    hover.style.left = (e.originalEvent.pageX + 12) + "px";
    hover.style.top = (e.originalEvent.pageY + 12) + "px";
  });

  marker.on("mouseout", e => {
    document.getElementById("hover").style.display = "none";
  });
});
  </script>
</body>
</html>
